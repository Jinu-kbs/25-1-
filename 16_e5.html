<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•¡ì²´ì—ì„œ ì—´ì€ ì–´ë–»ê²Œ ì´ë™í• ê¹Œìš”? - ëŒ€ë¥˜ í˜„ìƒ ì‹œë®¬ë ˆì´ì…˜</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f9ff;
            color: #1e3a8a;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #1e40af;
        }
        .sim-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 20px 0;
        }
        .beaker {
            position: relative;
            width: 300px;
            height: 400px;
            margin: 0 auto;
            border: 3px solid #333;
            border-top: none;
            border-radius: 0 0 20px 20px;
            background: linear-gradient(180deg, rgba(173,216,230,0.5) 0%, rgba(173,216,230,0.8) 100%);
            overflow: hidden;
            margin-top: 30px;
        }
        .beaker:before {
            content: '';
            position: absolute;
            left: -10px;
            top: -20px;
            width: 320px;
            height: 20px;
            background: #333;
            border-radius: 5px;
        }
        .ink-drop {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #0000FF;
            border-radius: 50%;
            opacity: 0.8;
            transition: all 0.5s ease;
        }
        .arrow {
            position: absolute;
            width: 20px;
            height: 20px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF0000"><path d="M12 5l-8 8 8 8 8-8z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .heat-source {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 30px;
            background: #FF4500;
            border-radius: 50%;
            display: none;
        }
        .control-panel {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .btn {
            background-color: #2563eb;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .btn:hover {
            background-color: #1d4ed8;
        }
        .btn:disabled {
            background-color: #93c5fd;
            cursor: not-allowed;
        }
        .btn-reset {
            background-color: #dc2626;
        }
        .btn-reset:hover {
            background-color: #b91c1c;
        }
        .ink-path {
            position: absolute;
            background-color: rgba(0, 0, 255, 0.2);
            border-radius: 50%;
        }
        .temperature-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(0deg, rgba(255,0,0,0.5) 0%, rgba(255,165,0,0.3) 50%, rgba(0,0,0,0) 100%);
            transition: height 2s ease;
        }
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(0, 0, 255, 0.6);
            border-radius: 50%;
        }
        .quiz-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .quiz-option {
            margin: 8px 0;
            padding: 8px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .quiz-option:hover {
            background-color: #f3f4f6;
        }
        .quiz-option.selected {
            background-color: #93c5fd;
            border-color: #3b82f6;
        }
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            display: none;
        }
        .feedback.correct {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .feedback.incorrect {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .example-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 20px;
            margin: 20px 0;
        }
        .example-item {
            flex: 1;
            min-width: 250px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .evaluation-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .star-container {
            display: flex;
            margin-left: 10px;
        }
        .star {
            color: #d1d5db;
            cursor: pointer;
            font-size: 24px;
            transition: color 0.2s;
        }
        .star.active {
            color: #fbbf24;
        }
        .experiment-image {
            max-width: 100%;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        @media (max-width: 640px) {
            .beaker {
                width: 200px;
                height: 300px;
            }
            .beaker:before {
                width: 220px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center py-6">
            <h1 class="text-3xl font-bold">ì•¡ì²´ì—ì„œ ì—´ì€ ì–´ë–»ê²Œ ì´ë™í• ê¹Œìš”?</h1>
            <p class="mt-2 text-lg">ì´ˆë“±í•™êµ 5í•™ë…„ / ê³¼í•™ - [2ë‹¨ì›] ì˜¨ë„ì™€ ì—´</p>
            <p class="text-sm text-gray-600">ì„±ì·¨ê¸°ì¤€: 5ê³¼07-03</p>
        </header>

        <section class="mb-8">
            <h2 class="text-2xl font-bold mb-4">í•™ìŠµ ëª©í‘œ</h2>
            <ul class="list-disc pl-6">
                <li class="mb-2">ì•¡ì²´ ë‚´ì—ì„œ ì—´ì´ ì–´ë–»ê²Œ ì „ë‹¬ë˜ëŠ”ì§€ë¥¼ ê´€ì°°í•  ìˆ˜ ìˆë‹¤.</li>
                <li class="mb-2">'ëŒ€ë¥˜'ë¼ëŠ” ê°œë…ì„ ì´í•´í•˜ê³  ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.</li>
                <li class="mb-2">ë¬¼ì˜ ë°€ë„ ì°¨ì— ì˜í•œ ìˆœí™˜ í˜„ìƒì„ ê´€ì°°í•  ìˆ˜ ìˆë‹¤.</li>
            </ul>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-bold mb-4">ëŒ€ë¥˜ í˜„ìƒ ê´€ì°°í•˜ê¸°</h2>
            
            <img src="https://cdn1.genspark.ai/user-upload-image/imagen_generated/91bf96d9-6a19-41b4-aa28-48177b25db1e" alt="ëŒ€ë¥˜ í˜„ìƒ ì˜ˆì‹œ" class="experiment-image">
            
            <div class="control-panel mb-4">
                <h3 class="text-xl font-semibold mb-3">ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="font-medium mb-2">1. ì‰í¬ íˆ¬ì… ìœ„ì¹˜</p>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="inkPosition" value="top" checked class="mr-2">
                                ìƒë‹¨ì—ì„œ íˆ¬ì…
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="inkPosition" value="bottom" class="mr-2">
                                í•˜ë‹¨ì—ì„œ íˆ¬ì…
                            </label>
                        </div>
                    </div>
                    <div>
                        <p class="font-medium mb-2">2. ë¬¼ì˜ ì˜¨ë„</p>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="waterTemp" value="hot" checked class="mr-2">
                                ëœ¨ê±°ìš´ ë¬¼
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="waterTemp" value="cold" class="mr-2">
                                ì°¨ê°€ìš´ ë¬¼
                            </label>
                        </div>
                    </div>
                    <div>
                        <p class="font-medium mb-2">3. ëœ¨ê±°ìš´ ì»µ ì‚¬ìš©</p>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="hotCup" value="yes" class="mr-2">
                                ìˆ˜ì¡° í•˜ë‹¨ì— ëœ¨ê±°ìš´ ì»µ ë°°ì¹˜
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="hotCup" value="no" checked class="mr-2">
                                ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
                            </label>
                        </div>
                    </div>
                    <div>
                        <p class="font-medium mb-2">4. íˆ¬ëª… í•„ë¦„ ì‚¬ìš©</p>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="film" value="yes" class="mr-2">
                                ìˆ˜ì¡° ì¤‘ê°„ì— íˆ¬ëª… í•„ë¦„ ì„¤ì¹˜
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="film" value="no" checked class="mr-2">
                                ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
                            </label>
                        </div>
                    </div>
                </div>
                <div class="flex space-x-4 mt-4">
                    <button id="startBtn" class="btn">ì‹¤í—˜ ì‹œì‘</button>
                    <button id="resetBtn" class="btn btn-reset">ë‹¤ì‹œ ì‹œì‘</button>
                </div>
            </div>

            <div class="sim-container">
                <div class="beaker" id="beaker">
                    <div class="temperature-gradient" id="tempGradient"></div>
                    <div class="heat-source" id="heatSource"></div>
                    <div id="filmLayer" style="position:absolute; width:100%; height:2px; background:rgba(200,200,200,0.8); top:50%; display:none;"></div>
                </div>
            </div>

            <div class="bg-white p-4 rounded-lg shadow-sm mb-6">
                <h3 class="text-xl font-semibold mb-3">ê´€ì°° ê²°ê³¼ ê¸°ë¡</h3>
                <textarea id="observationNotes" class="w-full p-2 border rounded" rows="4" placeholder="ì‹¤í—˜ì„ ê´€ì°°í•˜ê³  ì–´ë–¤ í˜„ìƒì´ ì¼ì–´ë‚¬ëŠ”ì§€ ê¸°ë¡í•´ë³´ì„¸ìš”."></textarea>
                <div id="observationFeedback" class="mt-2 p-2 rounded hidden"></div>
            </div>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-bold mb-4">ì´í•´ë„ í™•ì¸ í€´ì¦ˆ</h2>
            
            <div class="quiz-item">
                <p class="font-medium">1. ëœ¨ê±°ìš´ ë¬¼ì— ì‰í¬ë¥¼ ìœ„ì—ì„œ ë–¨ì–´ëœ¨ë¦¬ë©´ ì–´ë–»ê²Œ ì›€ì§ì´ë‚˜ìš”?</p>
                <div class="quiz-option" data-quiz="1" data-option="up">ìœ„ë¡œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</div>
                <div class="quiz-option" data-quiz="1" data-option="down">ì•„ë˜ë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</div>
                <div class="quiz-option" data-quiz="1" data-option="still">ì›€ì§ì´ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ìˆìŠµë‹ˆë‹¤.</div>
                <div class="feedback" id="feedback-quiz-1"></div>
            </div>
            
            <div class="quiz-item">
                <p class="font-medium">2. ì°¨ê°€ìš´ ë¬¼ì— ì‰í¬ë¥¼ ì•„ë˜ì—ì„œ ë„£ìœ¼ë©´ ì–´ë–»ê²Œ ì›€ì§ì´ë‚˜ìš”?</p>
                <div class="quiz-option" data-quiz="2" data-option="up">ìœ„ë¡œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</div>
                <div class="quiz-option" data-quiz="2" data-option="down">ì•„ë˜ë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</div>
                <div class="quiz-option" data-quiz="2" data-option="still">ì›€ì§ì´ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ìˆìŠµë‹ˆë‹¤.</div>
                <div class="feedback" id="feedback-quiz-2"></div>
            </div>
            
            <div class="quiz-item">
                <p class="font-medium">3. ì•„ë˜ì— ìˆëŠ” ë¬¼ì´ ìœ„ë¡œ ì˜¬ë¼ê°€ê³ , ìœ„ì— ìˆëŠ” ë¬¼ì´ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ëŠ” í˜„ìƒì„ ë¬´ì—‡ì´ë¼ê³  ë¶€ë¥´ë‚˜ìš”?</p>
                <div class="quiz-option" data-quiz="3" data-option="conduction">ì „ë„</div>
                <div class="quiz-option" data-quiz="3" data-option="convection">ëŒ€ë¥˜</div>
                <div class="quiz-option" data-quiz="3" data-option="radiation">ë³µì‚¬</div>
                <div class="feedback" id="feedback-quiz-3"></div>
            </div>
            
            <div class="quiz-item">
                <p class="font-medium">4. ì•¡ì²´ì—ì„œ ëŒ€ë¥˜ê°€ ì¼ì–´ë‚˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</p>
                <textarea id="quiz4Answer" class="w-full p-2 border rounded" rows="3" placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”."></textarea>
                <button id="checkQuiz4" class="btn mt-2">í™•ì¸í•˜ê¸°</button>
                <div class="feedback" id="feedback-quiz-4"></div>
            </div>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-bold mb-4">ì•Œì•„ë‘ì„¸ìš”!</h2>
            
            <div class="bg-white p-6 rounded-lg shadow-sm">
                <h3 class="text-xl font-semibold mb-3">ëŒ€ë¥˜ë€?</h3>
                <p class="mb-4">ëŒ€ë¥˜ëŠ” ì•¡ì²´ë‚˜ ê¸°ì²´ ë‚´ì—ì„œ ì˜¨ë„ ì°¨ì´ì— ì˜í•œ ë°€ë„ ë³€í™”ë¡œ ë¬¼ì§ˆì´ ì§ì ‘ ì´ë™í•˜ë©° ì—´ì´ ì „ë‹¬ë˜ëŠ” í˜„ìƒì…ë‹ˆë‹¤. ëœ¨ê±°ìš´ ë¬¼ì€ ë°€ë„ê°€ ë‚®ì•„ì ¸ ìœ„ë¡œ ì˜¬ë¼ê°€ê³ , ì°¨ê°€ìš´ ë¬¼ì€ ë°€ë„ê°€ ë†’ì•„ ì•„ë˜ë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</p>
                
                <img src="https://cdn1.genspark.ai/user-upload-image/imagen_generated/40c89180-a899-414a-ab2b-d7ae2ec6e3dc" alt="ëŒ€ë¥˜ ì‹œê°í™”" class="experiment-image">
                
                <h3 class="text-xl font-semibold mb-3 mt-6">ì¼ìƒìƒí™œ ì†ì˜ ëŒ€ë¥˜</h3>
                <p class="mb-4">ëŒ€ë¥˜ëŠ” ìš°ë¦¬ ì£¼ë³€ì—ì„œ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚œë°© ê¸°êµ¬ ì£¼ë³€ì˜ ê³µê¸°ê°€ ë”°ëœ»í•´ì ¸ ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” í˜„ìƒ, ë°”ë‹¤ì™€ ìœ¡ì§€ ì‚¬ì´ì˜ í•´í’ê³¼ ìœ¡í’, ì§€êµ¬ì˜ ëŒ€ê¸° ìˆœí™˜ ë“±ì´ ëª¨ë‘ ëŒ€ë¥˜ì˜ ì›ë¦¬ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                
                <div class="example-container">
                    <div class="example-item">
                        <h4 class="font-semibold mb-2">ğŸ”¥ ë‚œë°© ê¸°êµ¬</h4>
                        <p>ë”°ëœ»í•œ ê³µê¸°ê°€ ìœ„ë¡œ ì˜¬ë¼ê°€ê³ , ì°¨ê°€ìš´ ê³µê¸°ëŠ” ì•„ë˜ë¡œ ë‚´ë ¤ì™€ ìˆœí™˜í•©ë‹ˆë‹¤.</p>
                    </div>
                    
                    <div class="example-item">
                        <h4 class="font-semibold mb-2">ğŸŒŠ í•´í’ê³¼ ìœ¡í’</h4>
                        <p>ë‚®ì—ëŠ” ìœ¡ì§€ì˜ ê³µê¸°ê°€ ë¹¨ë¦¬ ë°ì›Œì ¸ ìœ„ë¡œ ì˜¬ë¼ê°€ í•´í’ì´ ë¶ˆê³ , ë°¤ì—ëŠ” ë°˜ëŒ€ë¡œ ìœ¡í’ì´ ë¶‘ë‹ˆë‹¤.</p>
                    </div>
                    
                    <div class="example-item">
                        <h4 class="font-semibold mb-2">ğŸŒ ëŒ€ê¸° ìˆœí™˜</h4>
                        <p>ì ë„ ë¶€ê·¼ì˜ ë”°ëœ»í•œ ê³µê¸°ê°€ ì˜¬ë¼ê°€ê³ , ê·¹ì§€ë°©ì˜ ì°¨ê°€ìš´ ê³µê¸°ê°€ ë‚´ë ¤ì˜¤ëŠ” ëŒ€ê¸° ìˆœí™˜ì´ ì¼ì–´ë‚©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-bold mb-4">ìŠ¤ìŠ¤ë¡œ í‰ê°€í•˜ê¸°</h2>
            
            <table class="w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm">
                <thead>
                    <tr class="bg-blue-100">
                        <th class="p-3 text-left">í‰ê°€ í•­ëª©</th>
                        <th class="p-3 text-center w-20">ì˜í•¨</th>
                        <th class="p-3 text-center w-20">ë³´í†µ</th>
                        <th class="p-3 text-center w-20">ë…¸ë ¥ í•„ìš”</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b">
                        <td class="p-3">ì•¡ì²´ì—ì„œ ì‰í¬ì˜ ì´ë™ì„ ê´€ì°°í•˜ê³  ë°©í–¥ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.</td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-1">
                                <span class="star" data-value="3">â˜…</span>
                            </div>
                        </td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-1">
                                <span class="star" data-value="2">â˜…</span>
                            </div>
                        </td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-1">
                                <span class="star" data-value="1">â˜…</span>
                            </div>
                        </td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3">ëŒ€ë¥˜ë¼ëŠ” ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ì—´ì˜ ì´ë™ ê³¼ì •ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.</td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-2">
                                <span class="star" data-value="3">â˜…</span>
                            </div>
                        </td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-2">
                                <span class="star" data-value="2">â˜…</span>
                            </div>
                        </td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-2">
                                <span class="star" data-value="1">â˜…</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="p-3">ì•ˆì „ ìˆ˜ì¹™ì„ ì§€í‚¤ë©° ì‹¤í—˜ì— ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í–ˆë‹¤.</td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-3">
                                <span class="star" data-value="3">â˜…</span>
                            </div>
                        </td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-3">
                                <span class="star" data-value="2">â˜…</span>
                            </div>
                        </td>
                        <td class="p-3 text-center">
                            <div class="star-container evaluation-3">
                                <span class="star" data-value="1">â˜…</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <div id="evaluationSaved" class="hidden mt-4 p-3 bg-green-100 text-green-700 rounded text-center">ìê¸° í‰ê°€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const beaker = document.getElementById('beaker');
            const tempGradient = document.getElementById('tempGradient');
            const heatSource = document.getElementById('heatSource');
            const filmLayer = document.getElementById('filmLayer');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            const observationNotes = document.getElementById('observationNotes');
            const observationFeedback = document.getElementById('observationFeedback');
            const stars = document.querySelectorAll('.star');
            const evaluationSaved = document.getElementById('evaluationSaved');
            
            let inkDrops = [];
            let particles = [];
            let arrows = [];
            let simulationRunning = false;
            let animationFrame;
            
            // ì‹¤í—˜ ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            startBtn.addEventListener('click', startSimulation);
            
            // ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            resetBtn.addEventListener('click', resetSimulation);
            
            // í€´ì¦ˆ ì‘ë‹µ í´ë¦­ ì´ë²¤íŠ¸
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const quizNumber = this.dataset.quiz;
                    const selectedOption = this.dataset.option;
                    const quizOptions = document.querySelectorAll(`[data-quiz="${quizNumber}"]`);
                    
                    // ì„ íƒ íš¨ê³¼ ì ìš©
                    quizOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // ì •ë‹µ í™•ì¸
                    checkQuizAnswer(quizNumber, selectedOption);
                });
            });
            
            // í€´ì¦ˆ 4ë²ˆ í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('checkQuiz4').addEventListener('click', function() {
                const answer = document.getElementById('quiz4Answer').value.trim();
                checkEssayAnswer(answer);
            });
            
            // ìê¸° í‰ê°€ ë³„ì  í´ë¦­ ì´ë²¤íŠ¸
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const value = this.dataset.value;
                    const evaluationClass = this.parentElement.classList[1];
                    
                    // ê°™ì€ í‰ê°€ í•­ëª©ì˜ ë‹¤ë¥¸ ë³„ë“¤ ë¹„í™œì„±í™”
                    document.querySelectorAll(`.${evaluationClass} .star`).forEach(s => {
                        s.classList.remove('active');
                    });
                    
                    // ì„ íƒí•œ ë³„ í™œì„±í™”
                    this.classList.add('active');
                    
                    // í‰ê°€ ì €ì¥ ë©”ì‹œì§€ í‘œì‹œ
                    evaluationSaved.classList.remove('hidden');
                    
                    // 3ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¹€
                    setTimeout(() => {
                        evaluationSaved.classList.add('hidden');
                    }, 3000);
                });
            });
            
            // ì‹¤í—˜ ì‹œì‘ í•¨ìˆ˜
            function startSimulation() {
                if (simulationRunning) return;
                
                simulationRunning = true;
                resetBeaker();
                
                const inkPosition = document.querySelector('input[name="inkPosition"]:checked').value;
                const waterTemp = document.querySelector('input[name="waterTemp"]:checked').value;
                const hotCup = document.querySelector('input[name="hotCup"]:checked').value;
                const film = document.querySelector('input[name="film"]:checked').value;
                
                // íˆ¬ëª… í•„ë¦„ ì‚¬ìš© ì—¬ë¶€
                filmLayer.style.display = film === 'yes' ? 'block' : 'none';
                
                // ëœ¨ê±°ìš´ ì»µ ì‚¬ìš© ì—¬ë¶€
                heatSource.style.display = hotCup === 'yes' ? 'block' : 'none';
                
                // ì˜¨ë„ ê·¸ë¼ë””ì–¸íŠ¸ í‘œì‹œ
                if (waterTemp === 'hot' || hotCup === 'yes') {
                    tempGradient.style.height = '50%';
                }
                
                // ì‰í¬ ìœ„ì¹˜ì— ë”°ë¥¸ ì´ë™ ë°©í–¥ ì„¤ì •
                let inkDirection = 0;
                if ((waterTemp === 'hot' && inkPosition === 'bottom') || 
                    (waterTemp === 'cold' && inkPosition === 'top') || 
                    hotCup === 'yes') {
                    inkDirection = -1; // ìœ„ë¡œ ì´ë™
                } else {
                    inkDirection = 1; // ì•„ë˜ë¡œ ì´ë™
                }
                
                // ì‰í¬ ë°©ìš¸ ìƒì„±
                createInkDrop(inkPosition, inkDirection);
                
                // ì…ì ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
                createParticles(waterTemp, hotCup);
                
                // ëŒ€ë¥˜ í™”ì‚´í‘œ í‘œì‹œ
                createArrows(waterTemp, hotCup);
            }
            
            // ì‹¤í—˜ ì´ˆê¸°í™” í•¨ìˆ˜
            function resetSimulation() {
                simulationRunning = false;
                cancelAnimationFrame(animationFrame);
                resetBeaker();
                observationNotes.value = '';
                observationFeedback.classList.add('hidden');
            }
            
            // ìˆ˜ì¡° ì´ˆê¸°í™” í•¨ìˆ˜
            function resetBeaker() {
                // ê¸°ì¡´ ì‰í¬ ë°©ìš¸, ì…ì, í™”ì‚´í‘œ ì œê±°
                inkDrops.forEach(drop => drop.remove());
                particles.forEach(particle => particle.remove());
                arrows.forEach(arrow => arrow.remove());
                
                inkDrops = [];
                particles = [];
                arrows = [];
                
                // ì˜¨ë„ ê·¸ë¼ë””ì–¸íŠ¸ ì´ˆê¸°í™”
                tempGradient.style.height = '0%';
            }
            
            // ì‰í¬ ë°©ìš¸ ìƒì„± í•¨ìˆ˜
            function createInkDrop(position, direction) {
                const inkDrop = document.createElement('div');
                inkDrop.className = 'ink-drop';
                
                let startY = position === 'top' ? 50 : 350;
                let startX = 150;
                
                inkDrop.style.left = `${startX}px`;
                inkDrop.style.top = `${startY}px`;
                
                beaker.appendChild(inkDrop);
                inkDrops.push(inkDrop);
                
                // ì‰í¬ ì´ë™ ì• ë‹ˆë©”ì´ì…˜
                moveInkDrop(inkDrop, direction, startY);
            }
            
            // ì‰í¬ ë°©ìš¸ ì´ë™ í•¨ìˆ˜
            function moveInkDrop(inkDrop, direction, startY) {
                let y = startY;
                let opacity = 0.8;
                let scale = 1;
                let paths = [];
                
                // ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
                function animate() {
                    if (!simulationRunning) return;
                    
                    // í•„ë¦„ì— ì˜í•œ ì´ë™ ì œí•œ
                    if (document.getElementById('filmLayer').style.display !== 'none') {
                        const filmY = beaker.offsetHeight / 2;
                        if ((direction < 0 && y < filmY && startY > filmY) ||
                            (direction > 0 && y > filmY && startY < filmY)) {
                            y = filmY;
                            createInkPath(inkDrop.offsetLeft, y);
                            return;
                        }
                    }
                    
                    y += direction * -2; // ìœ„ë¡œ ì´ë™(ìŒìˆ˜) ë˜ëŠ” ì•„ë˜ë¡œ ì´ë™(ì–‘ìˆ˜)
                    opacity -= 0.003;
                    scale += 0.01;
                    
                    inkDrop.style.top = `${y}px`;
                    inkDrop.style.opacity = opacity;
                    inkDrop.style.transform = `scale(${scale})`;
                    
                    // ì‰í¬ ê²½ë¡œ ìƒì„±
                    if (Math.random() > 0.7) {
                        createInkPath(inkDrop.offsetLeft, y);
                    }
                    
                    // í™”ë©´ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê±°ë‚˜ íˆ¬ëª…í•´ì§€ë©´ ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ
                    if (y < 0 || y > beaker.offsetHeight || opacity <= 0) {
                        return;
                    }
                    
                    animationFrame = requestAnimationFrame(animate);
                }
                
                animate();
            }
            
            // ì‰í¬ ê²½ë¡œ ìƒì„± í•¨ìˆ˜
            function createInkPath(x, y) {
                const path = document.createElement('div');
                path.className = 'ink-path';
                path.style.left = `${x + Math.random() * 10 - 5}px`;
                path.style.top = `${y + Math.random() * 10 - 5}px`;
                path.style.width = `${Math.random() * 8 + 4}px`;
                path.style.height = `${Math.random() * 8 + 4}px`;
                
                beaker.appendChild(path);
                
                // ì¼ì • ì‹œê°„ í›„ ì œê±°
                setTimeout(() => {
                    path.remove();
                }, 2000 + Math.random() * 2000);
            }
            
            // ì…ì ìƒì„± í•¨ìˆ˜
            function createParticles(waterTemp, hotCup) {
                if (!simulationRunning) return;
                
                // ëœ¨ê±°ìš´ ë¬¼ ë˜ëŠ” ëœ¨ê±°ìš´ ì»µ ì¡°ê±´ì— ë§ëŠ” ì…ì ìƒì„±
                if (waterTemp === 'hot' || hotCup === 'yes') {
                    for (let i = 0; i < 30; i++) {
                        createParticle(hotCup === 'yes');
                    }
                }
            }
            
            // ì…ì ìƒì„± í•¨ìˆ˜
            function createParticle(fromBottom) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // ì´ˆê¸° ìœ„ì¹˜ ì„¤ì •
                let x = Math.random() * 260 + 20;
                let y = fromBottom ? beaker.offsetHeight - 20 : Math.random() * beaker.offsetHeight;
                
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                
                beaker.appendChild(particle);
                particles.push(particle);
                
                // ì…ì ì´ë™ ì• ë‹ˆë©”ì´ì…˜
                moveParticle(particle, fromBottom, x, y);
            }
            
            // ì…ì ì´ë™ í•¨ìˆ˜
            function moveParticle(particle, fromBottom, x, y) {
                let dir = fromBottom ? -1 : Math.random() > 0.5 ? -1 : 1;
                
                function animate() {
                    if (!simulationRunning) return;
                    
                    // í•„ë¦„ì— ì˜í•œ ì´ë™ ì œí•œ
                    if (document.getElementById('filmLayer').style.display !== 'none') {
                        const filmY = beaker.offsetHeight / 2;
                        if ((dir < 0 && y <= filmY + 5 && fromBottom)) {
                            // ì¢Œìš°ë¡œë§Œ ì›€ì§ì´ê²Œ ë³€ê²½
                            x += (Math.random() - 0.5) * 2;
                            if (x < 20) x = 20;
                            if (x > 280) x = 280;
                            
                            particle.style.left = `${x}px`;
                            
                            // ì¼ì • í™•ë¥ ë¡œ ì…ì ì œê±° ë° ìƒˆë¡œ ìƒì„±
                            if (Math.random() > 0.98) {
                                particle.remove();
                                createParticle(true);
                                return;
                            }
                            
                            animationFrame = requestAnimationFrame(animate);
                            return;
                        }
                    }
                    
                    // ì…ì ì´ë™
                    y += dir * (Math.random() * 2 + 1);
                    x += (Math.random() - 0.5) * 2;
                    
                    // ê²½ê³„ í™•ì¸
                    if (x < 20) x = 20;
                    if (x > 280) x = 280;
                    
                    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;
                    
                    // ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ì…ì ì¬ìƒì„±
                    if (y < 0 || y > beaker.offsetHeight) {
                        particle.remove();
                        createParticle(fromBottom);
                        return;
                    }
                    
                    animationFrame = requestAnimationFrame(animate);
                }
                
                animate();
            }
            
            // ëŒ€ë¥˜ í™”ì‚´í‘œ ìƒì„± í•¨ìˆ˜
            function createArrows(waterTemp, hotCup) {
                if (!simulationRunning) return;
                
                // í™”ì‚´í‘œ ìƒì„± (ìœ„ë¡œ)
                const arrowUp1 = document.createElement('div');
                arrowUp1.className = 'arrow';
                arrowUp1.style.left = '70px';
                arrowUp1.style.top = '200px';
                arrowUp1.style.transform = 'rotate(180deg)';
                beaker.appendChild(arrowUp1);
                arrows.push(arrowUp1);
                
                const arrowUp2 = document.createElement('div');
                arrowUp2.className = 'arrow';
                arrowUp2.style.left = '70px';
                arrowUp2.style.top = '250px';
                arrowUp2.style.transform = 'rotate(180deg)';
                beaker.appendChild(arrowUp2);
                arrows.push(arrowUp2);
                
                // í™”ì‚´í‘œ ìƒì„± (ì•„ë˜ë¡œ)
                const arrowDown1 = document.createElement('div');
                arrowDown1.className = 'arrow';
                arrowDown1.style.right = '70px';
                arrowDown1.style.top = '150px';
                beaker.appendChild(arrowDown1);
                arrows.push(arrowDown1);
                
                const arrowDown2 = document.createElement('div');
                arrowDown2.className = 'arrow';
                arrowDown2.style.right = '70px';
                arrowDown2.style.top = '200px';
                beaker.appendChild(arrowDown2);
                arrows.push(arrowDown2);
                
                // í™”ì‚´í‘œ í‘œì‹œ ì• ë‹ˆë©”ì´ì…˜
                showArrows(waterTemp, hotCup);
            }
            
            // í™”ì‚´í‘œ í‘œì‹œ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
            function showArrows(waterTemp, hotCup) {
                setTimeout(() => {
                    arrows.forEach(arrow => {
                        arrow.style.opacity = '0.7';
                    });
                }, 2000);
            }
            
            // í€´ì¦ˆ ì •ë‹µ ì²´í¬ í•¨ìˆ˜
            function checkQuizAnswer(quizNumber, selectedOption) {
                const feedbackElement = document.getElementById(`feedback-quiz-${quizNumber}`);
                let isCorrect = false;
                let feedbackText = '';
                
                switch (quizNumber) {
                    case '1':
                        if (selectedOption === 'down') {
                            isCorrect = true;
                            feedbackText = 'ì •ë‹µì…ë‹ˆë‹¤! ëœ¨ê±°ìš´ ë¬¼ì—ì„œ ìœ„ì—ì„œ íˆ¬ì…ëœ ì‰í¬ëŠ” ëŒ€ë¥˜ í˜„ìƒì— ì˜í•´ ì•„ë˜ë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤.';
                        } else {
                            feedbackText = 'ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ëœ¨ê±°ìš´ ë¬¼ì—ì„œëŠ” ì–´ë–¤ íë¦„ì´ í˜•ì„±ë˜ë‚˜ìš”?';
                        }
                        break;
                    case '2':
                        if (selectedOption === 'down') {
                            isCorrect = true;
                            feedbackText = 'ì •ë‹µì…ë‹ˆë‹¤! ì°¨ê°€ìš´ ë¬¼ì— ì•„ë˜ì—ì„œ ë„£ì€ ì‰í¬ëŠ” ì•„ë˜ë¡œ ê°€ë¼ì•‰ìŠµë‹ˆë‹¤.';
                        } else {
                            feedbackText = 'ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ì°¨ê°€ìš´ ë¬¼ì—ì„œëŠ” ì‰í¬ê°€ ì–´ë–»ê²Œ ì›€ì§ì´ë‚˜ìš”?';
                        }
                        break;
                    case '3':
                        if (selectedOption === 'convection') {
                            isCorrect = true;
                            feedbackText = 'ì •ë‹µì…ë‹ˆë‹¤! ì´ê²ƒì´ ë°”ë¡œ ëŒ€ë¥˜(convection) í˜„ìƒì…ë‹ˆë‹¤.';
                        } else {
                            feedbackText = 'ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ë¬¼ì§ˆ ìì²´ê°€ ì´ë™í•˜ë©´ì„œ ì—´ì´ ì „ë‹¬ë˜ëŠ” í˜„ìƒì„ ë¬´ì—‡ì´ë¼ê³  í•˜ë‚˜ìš”?';
                        }
                        break;
                }
                
                // í”¼ë“œë°± í‘œì‹œ
                feedbackElement.textContent = feedbackText;
                feedbackElement.style.display = 'block';
                
                if (isCorrect) {
                    feedbackElement.className = 'feedback correct';
                } else {
                    feedbackElement.className = 'feedback incorrect';
                }
            }
            
            // ì„œìˆ í˜• ë‹µë³€ ì²´í¬ í•¨ìˆ˜
            function checkEssayAnswer(answer) {
                const feedbackElement = document.getElementById(`feedback-quiz-4`);
                
                // í‚¤ì›Œë“œ í™•ì¸
                const keywords = ['ì˜¨ë„', 'ë°€ë„', 'ì°¨ì´', 'ëŒ€ë¥˜', 'ìˆœí™˜', 'ì´ë™', 'ì—´'];
                let matchCount = 0;
                
                keywords.forEach(keyword => {
                    if (answer.includes(keyword)) {
                        matchCount++;
                    }
                });
                
                // í”¼ë“œë°± ì¤€ë¹„
                let feedbackText = '';
                let isGoodAnswer = false;
                
                if (matchCount >= 3) {
                    isGoodAnswer = true;
                    feedbackText = 'ì¢‹ì€ ë‹µë³€ì…ë‹ˆë‹¤! ì•¡ì²´ì—ì„œ ëŒ€ë¥˜ê°€ ì¼ì–´ë‚˜ëŠ” ì´ìœ ë¥¼ ì˜ ì´í•´í•˜ê³  ìˆêµ°ìš”.';
                } else if (matchCount >= 1) {
                    feedbackText = 'ë¶€ë¶„ì ìœ¼ë¡œ ë§ì§€ë§Œ, ë” ìƒê°í•´ë³´ì„¸ìš”. ì˜¨ë„ ì°¨ì´ê°€ ì–´ë–»ê²Œ ë¬¼ì˜ ì´ë™ì„ ë§Œë“¤ì–´ë‚¼ê¹Œìš”?';
                } else {
                    feedbackText = 'ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ì˜¨ë„ ì°¨ì´, ë°€ë„ ë³€í™”, ë¬¼ì§ˆì˜ ì´ë™ì— ëŒ€í•´ ê³ ë ¤í•´ë³´ì„¸ìš”.';
                }
                
                // í”¼ë“œë°± í‘œì‹œ
                feedbackElement.textContent = feedbackText;
                feedbackElement.style.display = 'block';
                
                if (isGoodAnswer) {
                    feedbackElement.className = 'feedback correct';
                } else {
                    feedbackElement.className = 'feedback incorrect';
                }
            }
            
            // ê´€ì°° ê²°ê³¼ ë¶„ì„ í•¨ìˆ˜
            observationNotes.addEventListener('blur', function() {
                const notes = observationNotes.value.trim();
                
                if (notes.length > 10) {
                    const keywords = ['ëŒ€ë¥˜', 'ì‰í¬', 'ì´ë™', 'ìœ„', 'ì•„ë˜', 'ëœ¨ê±°ìš´', 'ì°¨ê°€ìš´', 'ìˆœí™˜', 'ì—´'];
                    let matchCount = 0;
                    
                    keywords.forEach(keyword => {
                        if (notes.includes(keyword)) {
                            matchCount++;
                        }
                    });
                    
                    // í”¼ë“œë°± ì¤€ë¹„
                    if (matchCount >= 3) {
                        observationFeedback.textContent = 'ì¢‹ì€ ê´€ì°°ì´ë„¤ìš”! ëŒ€ë¥˜ í˜„ìƒì„ ì˜ ì´í•´í•˜ê³  ê³„ì‹  ê²ƒ ê°™ìŠµë‹ˆë‹¤.';
                        observationFeedback.className = 'mt-2 p-2 rounded bg-green-100 text-green-700';
                    } else {
                        observationFeedback.textContent = 'ë” ìì„¸íˆ ê´€ì°°í•´ë³´ì„¸ìš”. ì‰í¬ì˜ ì´ë™ ë°©í–¥ê³¼ ë¬¼ì˜ ì˜¨ë„ ë³€í™”ë¥¼ í•¨ê»˜ ìƒê°í•´ë³´ë©´ ì–´ë–¨ê¹Œìš”?';
                        observationFeedback.className = 'mt-2 p-2 rounded bg-yellow-100 text-yellow-700';
                    }
                    
                    observationFeedback.classList.remove('hidden');
                }
            });
        });
    </script>
</body>
</html>
